## 목표
- 안드로이드 앱 패키지/디렉토리 구조를 기능 중심으로 재정리하여 유지보수성과 확장성을 개선한다.
- 공통 로직과 기능별 UI/도메인을 분리해 의존성 방향을 단순화한다.

## 범위
- 패키지 이동 및 파일 정리
- import 경로 수정
- Gradle/Manifest 등 참조 경로 점검
- 기능 동작에 영향 없는 리팩터링

## 비범위
- 기능 변경/추가
- UI/UX 개편
- API 스펙 변경

## 권장 구조(기능 중심)
- `com.rpa.android.core`
  - CrashReporter, CryptoProvider, ServiceEvents, MetricsStore
- `com.rpa.android.data`
  - ConfigStore, LogStore, KeyStore, 모델 data class
- `com.rpa.android.tunnel`
  - RpaService, RpaServiceController, SshTunnelManager, NetworkMonitor, SleepMonitor, ErrorClassifier
- `com.rpa.android.ui`
  - MainActivity, 공통 컴포넌트
  - `ui.theme` 유지
- `com.rpa.android.feature.*`
  - status/logs/config/metrics/doctor 화면 컴포넌트 (현재 MainActivity 내 composable 분리)

## 단계
1) 기존 파일 목록과 역할 매핑
2) 패키지 이동 계획 확정
3) 파일 이동 및 import 갱신
4) 빌드/런타임 점검 (로컬 assembleRelease)

## 리스크 및 대응
- 리팩터링 중 누락된 import/패키지 → 빌드로 즉시 검증
- 리소스 참조 경로 불일치 → build 실패 시 수정

## 완료 기준
- 빌드 성공
- 앱 기능 동일 동작 확인(최소: 실행/로그/SSH 연결/Doctor 탭)

## 내부 컴포넌트 구조 (Mermaid)

```mermaid
flowchart TB
  subgraph Core
    Crash[CrashReporter]
    Crypto[CryptoProvider]
    Events[ServiceEvents]
    Metrics[MetricsStore]
  end

  subgraph Data
    Config[ConfigStore]
    Logs[LogStore]
    Keys[KeyStore]
  end

  subgraph Tunnel
    Service[RpaService]
    Controller[RpaServiceController]
    Manager[SshTunnelManager]
    Net[NetworkMonitor]
    Sleep[SleepMonitor]
    Err[ErrorClassifier]
  end

  subgraph UI
    Main[MainActivity]
    Features[feature/status|logs|config|metrics|doctor]
    Theme[ui.theme]
  end

  UI --> Tunnel
  Tunnel --> Data
  Tunnel --> Core
  UI --> Core
```
